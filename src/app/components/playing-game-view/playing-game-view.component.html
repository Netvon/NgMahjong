<ng-template #loading>
    <div class="level">
        <div class="level-item">
            <i class="fa fa-circle-o-notch fa-spin fa-2x fa-fw"></i>
            <span class="sr-only">Loading...</span>
        </div>
    </div>
</ng-template>


<div class="columns is-multiline" *ngIf="gameBoard; else loading; let lGameBoard">

        <div class="column is-3">
            <div class="has-text-centered">
                <div>
                    <p class="heading">Tiles left</p>
                    <p class="title">{{ lGameBoard.tiles.length }} / 144</p>
                </div>
            </div>
        </div>

        <div class="column is-6">
            <!--<div class="box has-text-centered">-->
                <!--<div>-->
                    <!--<p class="heading">Messages are here able to see, like "no more matches are available" or "These tiles are not matchable"</p>-->
                <!--</div>-->
            <!--</div>-->


            <div class="tabs is-toggle is-fullwidth">
                <ul>
                    <li [ngClass]="{'is-active' : !historyMode}" class="is-active">
                        <a (click)="loadPlayingMode()">
                            <span class="icon is-small"><i class="fa fa-play"></i></span>
                            <span>Play</span>
                        </a>
                    </li>
                    <li [ngClass]="{'is-active' : historyMode}">
                        <a (click)="loadHistoryMode()">
                            <span class="icon is-small"><i class="fa fa-history"></i></span>
                            <span>History</span>
                        </a>
                    </li>
                </ul>
            </div>

        </div>

    <!--<div class="column is-6">-->
            <!--<div class="tabs is-medium is-centered">-->
                <!--<ul>-->
                    <!--<li class="is-active">-->
                        <!--<a>-->
                            <!--<span>Playing board</span>-->
                        <!--</a>-->
                    <!--</li>-->
                    <!--<li>-->
                        <!--<a>-->
                            <!--<span>History</span>-->
                        <!--</a>-->
                    <!--</li>-->
                <!--</ul>-->
            <!--</div>-->
        <!--</div>-->


        <div class="column is-3">

            <input *ngIf="historyMode" class="range-slider__range" min="0" max="144" type="range"/>

            <button *ngIf="isPlayer && !historyMode" class="button is-pulled-right is-large is-primary" (click)="gameBoard.showHintTiles()">Show hint</button>

        </div>

        <div class="column is-12" *ngIf="groupedBoard; else loading;">
            <svg  [attr.viewBox]="viewBox" [classList]="containerClass" xmlns="http://www.w3.org/2000/svg">
                <svg:g *ngFor="let group of groupedBoard; let i = index"
                       [attr.data-z]="i"
                       [attr.transform]="'translate(' + (tileZOffsetX * i) + ',' + (tileZOffsetY * i) + ')'">

                    <svg:g *ngFor="let tile of group" (click)="selectTile(tile)">

                        <image
                                [attr.xlink:href]="tile.spriteSource"
                                [attr.width]="tile.width"
                                [attr.height]="tile.height"
                                [attr.x]="tile.x"
                                [attr.y]="tile.y">
                        </image>

                        <svg:rect [attr.x]="tile.x"
                                  [attr.y]="tile.y"
                                  [attr.width]="tile.width"
                                  [attr.height]="tile.height"
                                  [attr.data-hintable]="tile | tileHintable: gameBoard.hintTiles"
                                  [classList]="tileClass">
                        </svg:rect>

                        <svg:rect 
                                  [attr.x]="tile.x"
                                  [attr.y]="tile.y"
                                  [attr.width]="tile.width"
                                  [attr.height]="tile.height"
                                  [attr.data-hoverable]="isPlayer"
                                  [attr.data-selectable]="tile | tileSelectable: gameBoard"
                                  [attr.data-selected]="tileSelected(tile)"
                                  [classList]="tileClass">
                        </svg:rect>


                    </svg:g>
                </svg:g>

            </svg>
        </div>
</div>
